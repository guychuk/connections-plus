var ie=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var yo=ie((vo,J)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(i){if(i.ep)return;i.ep=!0;const l=o(i);fetch(i.href,l)}})();function re(e,t=-1){let o=Array.from({length:e},(i,l)=>l+1),a=0;for(t<0&&(t=e);a<t;){const i=Math.floor(Math.random()*(e-a))+a;[o[a],o[i]]=[o[i],o[a]],a++}return o.slice(0,t)}const Ct=(e,t)=>Math.floor(Math.random()*(t-e))+e;function Ot(e,t=-1){const o=t===-1?e.length:t,a=re(o);for(let i=0;i<o;i++)[e[i],e[a[i]-1]]=[e[a[i]-1],e[i]]}const ae=e=>new Set(e).size!==e.length,le=e=>JSON.stringify([...e].sort()),tt=(e,t)=>Array.from({length:e},(o,a)=>Array.from({length:t},(i,l)=>({row:a,col:l}))).flat(),ce=e=>{if(e.some(t=>t==null)){_();return}},ue=async e=>new Promise(t=>setTimeout(t,e)),de=(e,t)=>{e||(console.error("Assertion failed:",t),_())};function fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Q={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */var he=Q.exports,St;function me(){return St||(St=1,function(e){(function(t,o){e.exports?e.exports=o():t.Toastify=o()})(he,function(t){var o=function(s){return new o.lib.init(s)},a="1.12.0";o.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},o.lib=o.prototype={toastify:a,constructor:o,init:function(s){return s||(s={}),this.options={},this.toastElement=null,this.options.text=s.text||o.defaults.text,this.options.node=s.node||o.defaults.node,this.options.duration=s.duration===0?0:s.duration||o.defaults.duration,this.options.selector=s.selector||o.defaults.selector,this.options.callback=s.callback||o.defaults.callback,this.options.destination=s.destination||o.defaults.destination,this.options.newWindow=s.newWindow||o.defaults.newWindow,this.options.close=s.close||o.defaults.close,this.options.gravity=s.gravity==="bottom"?"toastify-bottom":o.defaults.gravity,this.options.positionLeft=s.positionLeft||o.defaults.positionLeft,this.options.position=s.position||o.defaults.position,this.options.backgroundColor=s.backgroundColor||o.defaults.backgroundColor,this.options.avatar=s.avatar||o.defaults.avatar,this.options.className=s.className||o.defaults.className,this.options.stopOnFocus=s.stopOnFocus===void 0?o.defaults.stopOnFocus:s.stopOnFocus,this.options.onClick=s.onClick||o.defaults.onClick,this.options.offset=s.offset||o.defaults.offset,this.options.escapeMarkup=s.escapeMarkup!==void 0?s.escapeMarkup:o.defaults.escapeMarkup,this.options.ariaLive=s.ariaLive||o.defaults.ariaLive,this.options.style=s.style||o.defaults.style,s.backgroundColor&&(this.options.style.background=s.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var s=document.createElement("div");s.className="toastify on "+this.options.className,this.options.position?s.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(s.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):s.className+=" toastify-right",s.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var c in this.options.style)s.style[c]=this.options.style[c];if(this.options.ariaLive&&s.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)s.appendChild(this.options.node);else if(this.options.escapeMarkup?s.innerText=this.options.text:s.innerHTML=this.options.text,this.options.avatar!==""){var u=document.createElement("img");u.src=this.options.avatar,u.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?s.appendChild(u):s.insertAdjacentElement("afterbegin",u)}if(this.options.close===!0){var p=document.createElement("button");p.type="button",p.setAttribute("aria-label","Close"),p.className="toast-close",p.innerHTML="&#10006;",p.addEventListener("click",(function(w){w.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var d=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&d>360?s.insertAdjacentElement("afterbegin",p):s.appendChild(p)}if(this.options.stopOnFocus&&this.options.duration>0){var E=this;s.addEventListener("mouseover",function(w){window.clearTimeout(s.timeOutValue)}),s.addEventListener("mouseleave",function(){s.timeOutValue=window.setTimeout(function(){E.removeElement(s)},E.options.duration)})}if(typeof this.options.destination<"u"&&s.addEventListener("click",(function(w){w.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&s.addEventListener("click",(function(w){w.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var k=i("x",this.options),L=i("y",this.options),O=this.options.position=="left"?k:"-"+k,P=this.options.gravity=="toastify-top"?L:"-"+L;s.style.transform="translate("+O+","+P+")"}return s},showToast:function(){this.toastElement=this.buildToast();var s;if(typeof this.options.selector=="string"?s=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?s=this.options.selector:s=document.body,!s)throw"Root element is not defined";var c=o.defaults.oldestFirst?s.firstChild:s.lastChild;return s.insertBefore(this.toastElement,c),o.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(s){s.className=s.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),s.parentNode&&s.parentNode.removeChild(s),this.options.callback.call(s),o.reposition()}).bind(this),400)}},o.reposition=function(){for(var s={top:15,bottom:15},c={top:15,bottom:15},u={top:15,bottom:15},p=document.getElementsByClassName("toastify"),d,E=0;E<p.length;E++){l(p[E],"toastify-top")===!0?d="toastify-top":d="toastify-bottom";var k=p[E].offsetHeight;d=d.substr(9,d.length-1);var L=15,O=window.innerWidth>0?window.innerWidth:screen.width;O<=360?(p[E].style[d]=u[d]+"px",u[d]+=k+L):l(p[E],"toastify-left")===!0?(p[E].style[d]=s[d]+"px",s[d]+=k+L):(p[E].style[d]=c[d]+"px",c[d]+=k+L)}return this};function i(s,c){return c.offset[s]?isNaN(c.offset[s])?c.offset[s]:c.offset[s]+"px":"0px"}function l(s,c){return!s||typeof c!="string"?!1:!!(s.className&&s.className.trim().split(/\s+/gi).indexOf(c)>-1)}return o.lib.init.prototype=o.lib,o})}(Q)),Q.exports}var pe=me();const ye=fe(pe),ge=[1,2,3,4,5],ve=2e3,be=1500,we="compact",Te="easy",Ee=5,Y=["en","he"],$={en:{buttons:{newGame:"NEW ðŸŽ®",clear:"CLEAR ðŸ§¹",shuffle:"SHUFFLE ðŸŽ²",hint:"HINT ðŸ’¡",solve:"SOLVE ðŸŽ¯",submit:"SUBMIT âœ”ï¸"},subtitle:"Group sizes are",difficulties:{easy:"Easy ðŸ¥š",medium:"Medium ðŸ¤",hard:"Hard ðŸ”"},settings:{title:"Settings âš™ï¸",layout:"Layout:",layoutOptions:{compact:"Compact",spacious:"Spacious"},apply:"Apply âœ…"},howTo:{title:"How To Play? ðŸ¤”",objective:{title:"Objective",text:["Group the words by their hidden connections. Each word fits into oneâ€”and only oneâ€”group.","The catch? You donâ€™t know how many words are in each group. ðŸ˜‰"]},gameplay:{title:"Gameplay",steps:["Click on the words you think belong together.","Hit SUBMIT to check your guess.","Keep going until all groups are found."]},controls:{title:"Controls",buttons:{new:["ðŸŽ® NEW:","Start over with a new puzzle."],clear:["ðŸ§¹ CLEAR:","Clear your selection."],shuffle:["ðŸŽ² SHUFFLE:","Mix up the tiles."],solve:["ðŸŽ¯ SOLVE:","Solve the puzzle."],hint:["ðŸ’¡ HINT:","Get a hint - selects half the tiles of the largest unsolved group. Once shown, you cannot deselect those tiles!"],submit:["âœ”ï¸ SUBMIT:","Submit your selection."],difficulty:["ðŸ¤ DIFFICULTY:","Switch between Easy, Medium, and Hard modes."]}},feedback:{title:"Feedback System",toasts:{correct:"âœ… Correct selections: You'll get praised and the tile will move to the solution area with their connection revealed.",incorrect:`âŒ Mostly incorrect: You'll get a generic "nope" message.`,repeated:"ðŸ”„ Repeated submissions: The game will nudge you to try something new.",partial:"â„¹ï¸ Partially correct submissions (more than half right): Reveal how many tiles are correct."}},utility:{title:"Utility Bar",buttons:{theme:"ðŸŒž/ðŸŒœ Theme Toggle: Switch between light and dark themes.",settings:"âš™ï¸ Settings: Open the settings panel.",howTo:"â“ How To Play: Open this how-to popup."}}},toasts:{tooFew:"ðŸš« You need to select at least XXX tiles to submit",tooMany:"ðŸš« You need to select at most XXX tiles to submit",partial:"ðŸš€ You got XXX out of YYY correct!",error:"ðŸ«  Something went wrong",duplicate:"ðŸš« You already submitted that",correct:"ðŸŽ‰ You got it!",incorrect:"âŒ That's not it...",winner:"ðŸŽ‰ You won!",loser:"ðŸ‘Ž You lost."},errorScreen:{message:"An unexpected error occurred.",messageRefresh:"Click the emoji to refresh"}},he:{buttons:{newGame:"×—×“×© ðŸŽ®",clear:"× ×§×” ðŸ§¹",shuffle:"×¢×¨×‘×‘ ðŸŽ²",hint:"×¨×ž×– ðŸ’¡",solve:"×¤×ª×•×¨ ðŸŽ¯",submit:"×”×’×© âœ”ï¸"},subtitle:"×’×•×“×œ×™ ×”×§×‘×•×¦×•×ª ×”×",difficulties:{easy:"×§×œ ðŸ¥š",medium:"×‘×™× ×•× ×™ ðŸ¤",hard:"×§×©×” ðŸ”"},settings:{title:"×”×’×“×¨×•×ª âš™ï¸",layout:"×¤×¨×™×¡×”:",layoutOptions:{compact:"×¦×¤×•×£",spacious:"×ž×¨×•×•×—"},apply:"×”×—×œ âœ…"},howTo:{title:"××™×š ×œ×©×—×§? ðŸ¤”",objective:{title:"×ž×˜×¨×”",text:["×§×‘×¦×• ××ª ×”×ž×™×œ×™× ×œ×¤×™ ×”×§×©×¨×™× ×”×¡×ž×•×™×™× ×‘×™× ×™×”×Ÿ. ×›×œ ×ž×™×œ×” ×©×™×™×›×ª ×œ×§×‘×•×¦×” ××—×ª ×‘×œ×‘×“.","×”×˜×•×•×™×¡×˜? ××ª× ×œ× ×™×•×“×¢×™× ×›×ž×” ×ž×™×œ×™× ×™×© ×‘×›×œ ×§×‘×•×¦×”. ðŸ˜‰"]},gameplay:{title:"×ž×”×œ×š ×”×ž×©×—×§",steps:["×œ×—×¦×• ×¢×œ ×”×ž×™×œ×™× ×©×œ×“×¢×ª×›× ×©×™×™×›×•×ª ×œ××•×ª×” ×§×‘×•×¦×”.","×œ×—×¦×• ×¢×œ ×”×’×© ×›×“×™ ×œ×‘×“×•×§ ××ª ×”× ×™×—×•×©.","×”×ž×©×™×›×• ×¢×“ ×©×›×œ ×”×§×‘×•×¦×•×ª ×™×™×ž×¦××•."]},controls:{title:"×›×¤×ª×•×¨×™×",buttons:{new:["ðŸŽ® ×—×“×©:","×”×ª×—×™×œ×• ×ž×—×“×© ×¢× ×—×™×“×” ×—×“×©×”."],clear:["ðŸ§¹ × ×§×”:","× ×§×” ××ª ×”×‘×—×™×¨×” ×©×œ×š."],shuffle:["ðŸŽ² ×¢×¨×‘×‘:","×¢×¨×‘×‘ ××ª ×”××¨×™×—×™×."],solve:["ðŸŽ¯ ×¤×ª×•×¨:","×¤×ª×•×¨ ××ª ×”×¤××–×œ."],hint:["ðŸ’¡ ×¨×ž×–:","×§×‘×œ ×¨×ž×– â€“ × ×‘×—×¨×ª ×ž×—×¦×™×ª ×ž×”××¨×™×—×™× ×©×œ ×”×§×‘×•×¦×” ×”×’×“×•×œ×” ×‘×™×•×ª×¨ ×©×˜×¨× × ×¤×ª×¨×”. ×œ××—×¨ ×”×¦×’×ª ×”×¨×ž×–, ×œ× × ×™×ª×Ÿ ×œ×‘×˜×œ ××ª ×”×‘×—×™×¨×” ×‘××¨×™×—×™× ×”××œ×•!"],submit:["âœ”ï¸ ×”×’×©:","×©×œ×— ××ª ×”×‘×—×™×¨×” ×©×œ×š."],difficulty:["ðŸ¤ ×¨×ž×ª ×§×•×©×™:","×”×—×œ×£ ×‘×™×Ÿ ×ž×¦×‘×™× ×§×œ×™×, ×‘×™× ×•× ×™×™× ×•×§×©×™×."]}},feedback:{title:"×ž×¢×¨×›×ª ×ž×©×•×‘",toasts:{correct:"âœ… ×‘×—×™×¨×•×ª × ×›×•× ×•×ª: ×ª×§×‘×œ×• ×ž×—×ž××” ×•×”××¨×™×—×™× ×™×¢×‘×¨×• ×œ××–×•×¨ ×”×¤×ª×¨×•×Ÿ ×¢× ×—×©×™×¤×ª ×”×§×©×¨ ×‘×™× ×™×”×.",incorrect:'âŒ ×‘×—×™×¨×•×ª ×©×’×•×™×•×ª: ×ª×§×‘×œ×• ×”×•×“×¢×ª "×œ×" ×›×œ×œ×™×ª.',repeated:"ðŸ”„ ×—×–×¨×•×ª ×¢×œ × ×™×—×•×© ×–×”×”: ×”×ž×©×—×§ ×™×“×¨×‘×Ÿ ××ª×›× ×œ× ×¡×•×ª ×ž×©×”×• ×—×“×©.",partial:"â„¹ï¸ ×‘×—×™×¨×•×ª × ×›×•× ×•×ª ×—×œ×§×™×ª (×™×•×ª×¨ ×ž×—×¦×™ × ×›×•× ×•×ª): ×™×•×¦×’ ×ž×¡×¤×¨ ×”××¨×™×—×™× ×”× ×›×•× ×™×."}},utility:{title:"×¡×¨×’×œ ×¢×–×¨",buttons:{theme:"ðŸŒž/ðŸŒœ×ž×¦×‘ ×ª××•×¨×”: ×”×—×œ×£ ×‘×™×Ÿ ×ž×¦×‘ ×‘×”×™×¨ ×œ×›×”×”.",settings:"âš™ï¸ ×”×’×“×¨×•×ª: ×¤×ª×—×• ××ª ×ª×¤×¨×™×˜ ×”×”×’×“×¨×•×ª.",howTo:"â“ ×›×™×¦×“ ×œ×©×—×§: ×¤×ª×—×• ××ª ×ª×¤×¨×™×˜ ×”×›×™×¦×“ ×œ×©×—×§."}}},toasts:{tooFew:"ðŸš« ×¢×œ×™×š ×œ×‘×—×•×¨ ×œ×¤×—×•×ª XXX ××¨×™×—×™× ×›×“×™ ×œ×©×œ×•×—",tooMany:"ðŸš« ×¢×œ×™×š ×œ×‘×—×•×¨ ×œ×›×œ ×”×™×•×ª×¨ XXX ××¨×™×—×™× ×›×“×™ ×œ×©×œ×•×—",partial:"ðŸš€ ×§×™×‘×œ×ª XXX ×ž×ª×•×š YYY × ×›×•× ×•×ª!",error:"ðŸ«  ×ž×©×”×• ×”×©×ª×‘×©",duplicate:"ðŸš« ×›×‘×¨ × ×™×¡×™×ª ××ª ×–×”",correct:"ðŸŽ‰ ×”×¦×œ×—×ª!",incorrect:"âŒ ×–×” ×œ× × ×›×•×Ÿ...",winner:"ðŸŽ‰ × ×™×¦×—×ª!",loser:"ðŸ‘Ž ×”×¤×¡×“×ª."},errorScreen:{message:"×”×ª×¨×—×©×” ×©×’×™××” ×‘×œ×ª×™ ×¦×¤×•×™×”.",messageRefresh:"×œ×—×¦×• ×¢×œ ×”××™×ž×•×’'×™ ×›×“×™ ×œ×¨×¢× ×Ÿ"}}},dt={groups:ge,layout:we,defaultDifficulty:Te,mistakesAllowed:Ee},W=(e,t,o=ve)=>{const a=e.join(" ");return ye({text:t,duration:o,gravity:"top",position:"left",stopOnFocus:!0,className:a})},Me=e=>{const t=A(),o=$[t].toasts.tooFew.replace("XXX",e);return W(["toastify-rounded","toastify-invalid-choice"],o)},xe=e=>{const t=A(),o=$[t].toasts.tooMany.replace("XXX",e);return W(["toastify-rounded","toastify-invalid-choice"],o)},ke=(e,t)=>{const o=A(),a=$[o].toasts.partial.replace("XXX",e).replace("YYY",t);return W(["toastify-rounded","toastify-partial"],a)},Ie=()=>{const e=A();return W(["toastify-rounded","toastify-error"],$[e].toasts.duplicate)},Be=()=>{const e=A();return W(["toastify-rounded","toastify-correct"],$[e].toasts.correct)},Le=()=>{const e=A();return W(["toastify-rounded","toastify-incorrect"],$[e].toasts.incorrect)},Ce=()=>{const e=A();return W(["toastify-rounded","toastify-winner"],$[e].toasts.winner,-1)},Oe=()=>{const e=A();return W(["toastify-rounded","toastify-loser"],$[e].toasts.loser,-1)};var J={};(function e(t,o,a,i){var l=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),s=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!t.OffscreenCanvas)return!1;var r=new OffscreenCanvas(1,1),n=r.getContext("2d");n.fillRect(0,0,1,1);var f=r.transferToImageBitmap();try{n.createPattern(f,"no-repeat")}catch{return!1}return!0}();function u(){}function p(r){var n=o.exports.Promise,f=n!==void 0?n:t.Promise;return typeof f=="function"?new f(r):(r(u,u),null)}var d=function(r,n){return{transform:function(f){if(r)return f;if(n.has(f))return n.get(f);var m=new OffscreenCanvas(f.width,f.height),y=m.getContext("2d");return y.drawImage(f,0,0),n.set(f,m),m},clear:function(){n.clear()}}}(c,new Map),E=function(){var r=Math.floor(16.666666666666668),n,f,m={},y=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(g){var v=Math.random();return m[v]=requestAnimationFrame(function h(b){y===b||y+r-1<b?(y=b,delete m[v],g()):m[v]=requestAnimationFrame(h)}),v},f=function(g){m[g]&&cancelAnimationFrame(m[g])}):(n=function(g){return setTimeout(g,r)},f=function(g){return clearTimeout(g)}),{frame:n,cancel:f}}(),k=function(){var r,n,f={};function m(y){function g(v,h){y.postMessage({options:v||{},callback:h})}y.init=function(h){var b=h.transferControlToOffscreen();y.postMessage({canvas:b},[b])},y.fire=function(h,b,M){if(n)return g(h,null),n;var I=Math.random().toString(36).slice(2);return n=p(function(x){function B(C){C.data.callback===I&&(delete f[I],y.removeEventListener("message",B),n=null,d.clear(),M(),x())}y.addEventListener("message",B),g(h,I),f[I]=B.bind(null,{data:{callback:I}})}),n},y.reset=function(){y.postMessage({reset:!0});for(var h in f)f[h](),delete f[h]}}return function(){if(r)return r;if(!a&&l){var y=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([y])))}catch(g){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",g),null}m(r)}return r}}(),L={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function O(r,n){return n?n(r):r}function P(r){return r!=null}function w(r,n,f){return O(r&&P(r[n])?r[n]:L[n],f)}function q(r){return r<0?0:Math.floor(r)}function Z(r,n){return Math.floor(Math.random()*(n-r))+r}function K(r){return parseInt(r,16)}function st(r){return r.map(it)}function it(r){var n=String(r).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:K(n.substring(0,2)),g:K(n.substring(2,4)),b:K(n.substring(4,6))}}function rt(r){var n=w(r,"origin",Object);return n.x=w(n,"x",Number),n.y=w(n,"y",Number),n}function S(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function z(r){var n=r.getBoundingClientRect();r.width=n.width,r.height=n.height}function F(r){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=r,n}function G(r,n,f,m,y,g,v,h,b){r.save(),r.translate(n,f),r.rotate(g),r.scale(m,y),r.arc(0,0,1,v,h,b),r.restore()}function at(r){var n=r.angle*(Math.PI/180),f=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-n+(.5*f-Math.random()*f),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function lt(r,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var f=n.tick++/n.totalTicks,m=n.x+n.random*n.tiltCos,y=n.y+n.random*n.tiltSin,g=n.wobbleX+n.random*n.tiltCos,v=n.wobbleY+n.random*n.tiltSin;if(r.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-f)+")",r.beginPath(),s&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))r.fill(_t(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(g-m)*.1,Math.abs(v-y)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var h=Math.PI/10*n.wobble,b=Math.abs(g-m)*.1,M=Math.abs(v-y)*.1,I=n.shape.bitmap.width*n.scalar,x=n.shape.bitmap.height*n.scalar,B=new DOMMatrix([Math.cos(h)*b,Math.sin(h)*b,-Math.sin(h)*M,Math.cos(h)*M,n.x,n.y]);B.multiplySelf(new DOMMatrix(n.shape.matrix));var C=r.createPattern(d.transform(n.shape.bitmap),"no-repeat");C.setTransform(B),r.globalAlpha=1-f,r.fillStyle=C,r.fillRect(n.x-I/2,n.y-x/2,I,x),r.globalAlpha=1}else if(n.shape==="circle")r.ellipse?r.ellipse(n.x,n.y,Math.abs(g-m)*n.ovalScalar,Math.abs(v-y)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):G(r,n.x,n.y,Math.abs(g-m)*n.ovalScalar,Math.abs(v-y)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var T=Math.PI/2*3,N=4*n.scalar,R=8*n.scalar,j=n.x,D=n.y,U=5,H=Math.PI/U;U--;)j=n.x+Math.cos(T)*R,D=n.y+Math.sin(T)*R,r.lineTo(j,D),T+=H,j=n.x+Math.cos(T)*N,D=n.y+Math.sin(T)*N,r.lineTo(j,D),T+=H;else r.moveTo(Math.floor(n.x),Math.floor(n.y)),r.lineTo(Math.floor(n.wobbleX),Math.floor(y)),r.lineTo(Math.floor(g),Math.floor(v)),r.lineTo(Math.floor(m),Math.floor(n.wobbleY));return r.closePath(),r.fill(),n.tick<n.totalTicks}function Yt(r,n,f,m,y){var g=n.slice(),v=r.getContext("2d"),h,b,M=p(function(I){function x(){h=b=null,v.clearRect(0,0,m.width,m.height),d.clear(),y(),I()}function B(){a&&!(m.width===i.width&&m.height===i.height)&&(m.width=r.width=i.width,m.height=r.height=i.height),!m.width&&!m.height&&(f(r),m.width=r.width,m.height=r.height),v.clearRect(0,0,m.width,m.height),g=g.filter(function(C){return lt(v,C)}),g.length?h=E.frame(B):x()}h=E.frame(B),b=x});return{addFettis:function(I){return g=g.concat(I),M},canvas:r,promise:M,reset:function(){h&&E.cancel(h),b&&b()}}}function Mt(r,n){var f=!r,m=!!w(n||{},"resize"),y=!1,g=w(n,"disableForReducedMotion",Boolean),v=l&&!!w(n||{},"useWorker"),h=v?k():null,b=f?S:z,M=r&&h?!!r.__confetti_initialized:!1,I=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,x;function B(T,N,R){for(var j=w(T,"particleCount",q),D=w(T,"angle",Number),U=w(T,"spread",Number),H=w(T,"startVelocity",Number),Kt=w(T,"decay",Number),Jt=w(T,"gravity",Number),Qt=w(T,"drift",Number),kt=w(T,"colors",st),te=w(T,"ticks",Number),It=w(T,"shapes"),ee=w(T,"scalar"),oe=!!w(T,"flat"),Bt=rt(T),Lt=j,ut=[],ne=r.width*Bt.x,se=r.height*Bt.y;Lt--;)ut.push(at({x:ne,y:se,angle:D,spread:U,startVelocity:H,color:kt[Lt%kt.length],shape:It[Z(0,It.length)],ticks:te,decay:Kt,gravity:Jt,drift:Qt,scalar:ee,flat:oe}));return x?x.addFettis(ut):(x=Yt(r,ut,b,N,R),x.promise)}function C(T){var N=g||w(T,"disableForReducedMotion",Boolean),R=w(T,"zIndex",Number);if(N&&I)return p(function(H){H()});f&&x?r=x.canvas:f&&!r&&(r=F(R),document.body.appendChild(r)),m&&!M&&b(r);var j={width:r.width,height:r.height};h&&!M&&h.init(r),M=!0,h&&(r.__confetti_initialized=!0);function D(){if(h){var H={getBoundingClientRect:function(){if(!f)return r.getBoundingClientRect()}};b(H),h.postMessage({resize:{width:H.width,height:H.height}});return}j.width=j.height=null}function U(){x=null,m&&(y=!1,t.removeEventListener("resize",D)),f&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,M=!1)}return m&&!y&&(y=!0,t.addEventListener("resize",D,!1)),h?h.fire(T,j,U):B(T,j,U)}return C.reset=function(){h&&h.reset(),x&&x.reset()},C}var ct;function xt(){return ct||(ct=Mt(null,{useWorker:!0,resize:!0})),ct}function _t(r,n,f,m,y,g,v){var h=new Path2D(r),b=new Path2D;b.addPath(h,new DOMMatrix(n));var M=new Path2D;return M.addPath(b,new DOMMatrix([Math.cos(v)*y,Math.sin(v)*y,-Math.sin(v)*g,Math.cos(v)*g,f,m])),M}function qt(r){if(!s)throw new Error("path confetti are not supported in this browser");var n,f;typeof r=="string"?n=r:(n=r.path,f=r.matrix);var m=new Path2D(n),y=document.createElement("canvas"),g=y.getContext("2d");if(!f){for(var v=1e3,h=v,b=v,M=0,I=0,x,B,C=0;C<v;C+=2)for(var T=0;T<v;T+=2)g.isPointInPath(m,C,T,"nonzero")&&(h=Math.min(h,C),b=Math.min(b,T),M=Math.max(M,C),I=Math.max(I,T));x=M-h,B=I-b;var N=10,R=Math.min(N/x,N/B);f=[R,0,0,R,-Math.round(x/2+h)*R,-Math.round(B/2+b)*R]}return{type:"path",path:n,matrix:f}}function Zt(r){var n,f=1,m="#000000",y='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?n=r:(n=r.text,f="scalar"in r?r.scalar:f,y="fontFamily"in r?r.fontFamily:y,m="color"in r?r.color:m);var g=10*f,v=""+g+"px "+y,h=new OffscreenCanvas(g,g),b=h.getContext("2d");b.font=v;var M=b.measureText(n),I=Math.ceil(M.actualBoundingBoxRight+M.actualBoundingBoxLeft),x=Math.ceil(M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),B=2,C=M.actualBoundingBoxLeft+B,T=M.actualBoundingBoxAscent+B;I+=B+B,x+=B+B,h=new OffscreenCanvas(I,x),b=h.getContext("2d"),b.font=v,b.fillStyle=m,b.fillText(n,C,T);var N=1/f;return{type:"bitmap",bitmap:h.transferToImageBitmap(),matrix:[N,0,0,N,-I*N/2,-x*N/2]}}o.exports=function(){return xt().apply(this,arguments)},o.exports.reset=function(){xt().reset()},o.exports.create=Mt,o.exports.shapeFromPath=qt,o.exports.shapeFromText=Zt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),J,!1);const Nt=J.exports;J.exports.create;const Se="https://connections-plus.vercel.app",Ne=(e,t)=>{switch(e){case"easy":return Math.max(1,t);case"medium":return Math.max(1,Math.floor(t/2));case"hard":return Math.max(1,Math.floor(t/3))}};async function zt(e,t){const o=A(),a=Ne(t,e.length),i=encodeURIComponent(JSON.stringify(e)),l=await fetch(`${Se}/api/get-tiles?groupsSizes=${i}&numTags=${a}&language=${o}`);if(!l.ok){const c=await l.json();throw new Error(`Failed to fetch tiles: ${c.message}`)}const s=await l.json();return new Set(s)}async function Pe(e,t,o,a,i){const l=o.length,s=o[o.length-1],c=Ze(a,l,s,i),u=tt(l,s),p=Array.from({length:o.length},()=>({tiles:[],banner:null})),d=document.getElementById("difficulty-button");d.dataset.difficulty=t,d.textContent=gt(t),Et(o,p);const E=await zt(o,t),k={activeTiles:new Set,submissionHistory:new Set,solvedGroups:p,tileSet:E,unsolvedTiles:new Set(E),gameWon:!1,gameOver:!1,mistakesAllowed:e.mistakesAllowed,mistakesMade:0},L={board:a,freePositions:u,tileSize:c,gaps:i,rows:l,cols:s};Vt(),eo(u,k,L);const O=[...E].map(P=>P.button);return Rt(O),Ht(E,u,X()),{gameState:k,positions:u,boardConfig:L}}async function ze(e,t,o,a){oo(),o.submissionHistory.clear(),o.activeTiles.clear(),o.unsolvedTiles.clear();for(let u=0;u<o.solvedGroups.length;u++)o.solvedGroups[u].tiles.length=0;Et(t,o.solvedGroups),mo();const i=await zt(t,e),l=t.length,s=t[l-1];a.length=0,a.push(...tt(l,s)),Vt(),to(o.tileSet,i);const c=[...o.tileSet].map(u=>u.button);Rt(c);for(const u of o.tileSet)o.unsolvedTiles.add(u);o.gameWon=!1,o.gameOver=!1,o.mistakesMade=0,Ut(o.mistakesAllowed)}const Ft=(e,t,o,a)=>{t.solvedGroups[e].tiles=[];for(let c of t.activeTiles)t.solvedGroups[e].tiles.push(c),t.unsolvedTiles.delete(c),t.activeTiles.delete(c),c.button.classList.remove("selected"),c.button.classList.add("hidden"),c.button.classList.add(`group-${e+1}`),c.button.classList.add("completed"),c.button.disabled=!0;const i=a.length,l=a[a.length-1],s=t.solvedGroups.filter(c=>c.tiles.length>0).length;o.length=0,o.push(...tt(i-s,l))},Fe=(e,t,o)=>{let a=-1;for(let i=0;i<t.solvedGroups.length;i++)t.solvedGroups[i].tiles.length===0&&(a=i);if(a===-1)return!1;pt(t.activeTiles);for(let i of t.unsolvedTiles)i.groupIndex===a&&t.activeTiles.add(i);return Ft(a,t,o,e),!0},Ae=(e,t,o,a,i)=>{const l=e.activeTiles.size;let s=null,c=null;if(l<t[0])s=Me(t[0]);else{const u=le(e.activeTiles);if(e.submissionHistory.has(u))s=Ie();else{e.submissionHistory.add(u);const p=Array.from(e.activeTiles).reduce((d,E)=>E.groupSize===l?d+1:d,0);p===l?(c=[...e.activeTiles],s=Be()):(2*p>l?s=ke(p,l):s=Le(),Ge(e,t,o,a,i))}}return{toast:s,newlyCompletedGroup:c}},Ge=(e,t,o,a,i)=>{e.mistakesMade++,uo(),e.mistakesMade===e.mistakesAllowed&&(Oe().showToast(),At(e,t,o,a,i))},Re=(e,t,o,a,i)=>{const{toast:l,newlyCompletedGroup:s}=Ae(e,t,o,a,i);if(e.mistakesMade===e.mistakesAllowed)return;if(l===null){console.error("Toast is null"),_();return}if(l.showToast(),s!==null){const u=s[0].groupIndex;Ft(u,e,o,t),et(o,e,a),Et(t,e.solvedGroups)}const c=i.submit;c.disabled=!0,e.unsolvedTiles.size?setTimeout(()=>{c.disabled=e.gameOver},l.options.duration+100):(e.gameWon=!0,e.gameOver=!0,ro(i))},je=e=>{const t=e.currentTarget;switch(t.dataset.difficulty){case"easy":t.dataset.difficulty="medium";break;case"medium":t.dataset.difficulty="hard";break;case"hard":t.dataset.difficulty="easy";break}t.textContent=gt(t.dataset.difficulty)},He=async(e,t,o,a,i)=>{const l=Object.values(e);vt(l),Je(t.solvedGroups);const s=e.difficulty;await ze(s.dataset.difficulty,o,t,a),mt(a,t,i),$t(l)},mt=(e,t,o)=>{Ht(t.unsolvedTiles,e,X()),et(e,t,o)},pt=e=>{for(const t of e)t.button.classList.contains("hinted")||(t.button.classList.remove("selected"),e.delete(t))},At=async(e,t,o,a,i)=>{const l=Object.values(i);vt(l);const s=async()=>{Fe(t,e,o),et(o,e,a),await ue(750)};for(;e.unsolvedTiles.size>0;)await s();e.gameWon=!1,e.gameOver=!0,$t([i.newGame])},$e=(e,t)=>{const o=e.solvedGroups,a=e.activeTiles,i=e.unsolvedTiles;let l,s,c;for(let u=t.length-1;u>=0;u--)if(o[u].tiles.length===0){l=u,s=t[u],c=Math.ceil(s/2);break}pt(a);for(const u of i)if(u.groupIndex===l&&(u.button.click(),u.button.classList.add("hinted"),a.size===c))break};function De(e,t,o,a){const i={newGame:document.getElementById("newGame-button"),deselect:document.getElementById("clear-button"),shuffle:document.getElementById("shuffle-button"),hint:document.getElementById("hint-button"),solve:document.getElementById("solve-button"),submit:document.getElementById("submit-button"),difficulty:document.getElementById("difficulty-button")};i.difficulty.addEventListener("click",l=>{je(l),i.newGame.click()}),i.shuffle.addEventListener("click",()=>{mt(o,e,t)}),i.newGame.addEventListener("click",async()=>{He(i,e,a,o,t)}),i.deselect.addEventListener("click",()=>{pt(e.activeTiles)}),i.submit.addEventListener("click",()=>{Re(e,a,o,t,i)}),i.solve.addEventListener("click",async()=>{await At(e,a,o,t,i)}),i.hint.addEventListener("click",()=>{$e(e,a)})}const We=e=>{Wt(e);const t=document.getElementById("select-layout");Dt()?wt():nt(),ot(),t.value=X()},Xe=(e,t,o)=>{const i=document.getElementById("select-layout").value,l=X(),s=o.rows,c=o.cols;if(i!==l){jt(i);const u=t.solvedGroups.reduce((p,d)=>d.tiles.length>0?p+1:p,0);e.length=0,e.push(...tt(s-u,c)),mt(e,t,o)}ot(),nt()};function Ue(e,t,o){document.getElementById("apply-button").addEventListener("click",()=>{Xe(e,t,o)})}const Ve=()=>{bt()?ot():nt(),wt()},Ye=e=>{const o=getComputedStyle(document.documentElement).getPropertyValue("--animation-speed-spin").trim();Wt(e),setTimeout(()=>{location.reload()},parseFloat(o)*1e3)},_e=()=>{const e=co();Tt(e),document.getElementById("newGame-button").click(),Xt()},V="blurred",ft="dark-theme",qe="â˜ ï¸",Gt="â¤ï¸",Ze=(e,t,o,a)=>{const i=e.clientWidth,l=e.clientHeight,s=a.vertical*(t-1),c=a.horizontal*(o-1);return{height:Math.floor((l-s)/t),width:Math.floor((i-c)/o)}},yt=(e,t)=>{const o=t.tileSize.width,a=t.tileSize.height,i=t.gaps.horizontal,l=t.gaps.vertical;return{x:e.col*(o+i),y:e.row*(a+l)}},ht=(e,t,o)=>{const{x:a,y:i}=yt(e,o),l=o.tileSize.width,s=o.gaps.horizontal,c=o.cols;return{x:a+(l+s)*(c-t)/2,y:i}};function Rt(e){const t=e.map(a=>ho(a)),o=Math.min(...t);e.forEach(a=>{a.style.fontSize=`${o}px`})}const X=()=>localStorage.getItem("layout"),jt=e=>{localStorage.setItem("layout",e);const t=document.getElementById("select-layout");return t.value=e,X()},Ke=(e,t)=>{let o=t.rows-1;const a=t.tileSize.width,i=t.tileSize.height,l=t.gaps.horizontal;for(let s=o;s>=0;s--){const c=e[s],u=c.tiles,p=u.length;let d=c.banner;if(p>0){const E=u[0].category,k=[];u.forEach((P,w)=>{k.push(P.term);const{x:q,y:Z}=ht({row:o,col:w},p,t);P.button.style.left=`${q}px`,P.button.style.top=`${Z}px`});const{x:L,y:O}=ht({row:o,col:0},p,t);d?(d.style.left=`${L}px`,d.style.top=`${O}px`):(d=document.createElement("button"),d.classList.add("tile"),d.classList.add(`group-${s+1}`),d.classList.add("completed"),d.style.width=`${p*(a+l)-l}px`,d.style.height=`${i}px`,d.style.position="absolute",d.style.left=`${L}px`,d.style.top=`${O}px`,d.innerHTML=`<strong>${E}</strong><br>${k.join(", ")}`,board.appendChild(d),c.banner=d),o--}}};function Je(e){for(const t of e)t.banner&&(t.banner.classList.add("hidden"),setTimeout(()=>{t.banner.remove(),t.banner=null},500))}const Qe=(e,t,o,a)=>{a!=="spacious"&&a!=="compact"&&(console.error("Layout must be either 'spacious' or 'compact'"),_());const i=o.cols,l=Math.ceil(t.size/i),s=t.size%i;let c=0;for(const u of t){const p=u.button,{row:d,col:E}=e[c];let k=null;a==="compact"&&s>0&&d===l-1?k=ht({row:d,col:E},s,o):k=yt({row:d,col:E},o),p.style.left=`${k.x}px`,p.style.top=`${k.y}px`,c++}};function et(e,t,o){const a=X();a!=="spacious"&&a!=="compact"&&(console.error("Layout must be either 'spacious' or 'compact'"),_());const i=t.solvedGroups,l=t.unsolvedTiles;Ke(i,o),Qe(e,l,o,a)}const Ht=(e,t)=>{const o=X();o!=="spacious"&&o!=="compact"&&(console.error("Layout must be either 'spacious' or 'compact'"),_()),o==="compact"?Ot(t,e.size):Ot(t)},to=(e,t)=>{ce([e,t]);const o=Array.from(e),a=Array.from(t);for(let i=0;i<o.length;i++)o[i].id=a[i].id,o[i].term=a[i].term,o[i].category=a[i].category,o[i].groupSize=a[i].groupSize,o[i].groupIndex=a[i].groupIndex,o[i].button.textContent=o[i].term,o[i].button.className="tile",o[i].button.disabled=!1};function eo(e,t,o){let a=0;const i=o.tileSize,l=o.cols;for(const s of t.tileSet){const c=document.createElement("button"),{x:u,y:p}=yt(e[a++],o);c.classList.add("tile"),c.style.width=`${i.width}px`,c.style.height=`${i.height}px`,c.textContent=s.term,c.style.position="absolute",c.style.left=`${u}px`,c.style.top=`${p}px`,s.button=c,c.addEventListener("click",()=>{t.activeTiles.has(s)&&!c.classList.contains("hinted")?(c.classList.remove("selected"),t.activeTiles.delete(s)):t.activeTiles.size<l?(c.classList.add("selected"),t.activeTiles.add(s)):xe(l).showToast()}),board.appendChild(c)}}const gt=e=>{const t=A(),o=$[t].difficulties[e];if(o)return o;throw new Error("Invalid difficulty")},vt=e=>{e.forEach(t=>t.disabled=!0)},$t=e=>{e.forEach(t=>t.disabled=!1)},oo=()=>{document.querySelectorAll(".toastify").forEach(t=>t.remove())},ot=()=>{document.getElementById("settings-panel").classList.toggle(V)},bt=()=>document.getElementById("settings-panel").classList.contains(V),wt=()=>{document.getElementById("how-to-popup").classList.toggle(V)},Dt=()=>document.getElementById("how-to-popup").classList.contains(V),nt=()=>{document.getElementById("blur-overlay").classList.toggle(V)},no=()=>{document.getElementById("blur-overlay").classList.add(V)},so=()=>{document.getElementById("blur-overlay").classList.remove(V)};function _(){[...document.body.children].forEach(a=>{a.id!=="error-screen"&&a.tagName!=="HEADER"&&(a.style.display="none")});const e=document.getElementById("settings-button");e.style.display="none";const t=document.getElementById("how-to-button");t.style.display="none";const o=document.getElementById("error-screen");o.style.display="flex"}function io(e){const t=window.innerWidth<=768;var o=Date.now()+e,a={startVelocity:30,spread:360,ticks:100,zIndex:0},i={startVelocity:20,spread:120,ticks:80,zIndex:0,scalar:.5},l=setInterval(function(){var s=o-Date.now();if(s<=0)return clearInterval(l);var c=100*(s/e);const u=t?i:a;Nt({...u,particleCount:c,origin:{x:Ct(.1,.3),y:Math.random()-.2}}),Nt({...u,particleCount:c,origin:{x:Ct(.7,.9),y:Math.random()-.2}})},250)}function ro(e){const o=Object.values(e).filter(a=>a!==e.newGame);vt(o),Ce().showToast(),io(be)}function Wt(e){const o=getComputedStyle(document.documentElement).getPropertyValue("--animation-speed-spin").trim();e.target.classList.add("spin"),setTimeout(()=>{e.target.classList.remove("spin")},parseFloat(o)*1e3)}function Pt(){window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add(ft):document.body.classList.remove(ft)}function ao(){Pt(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Pt)}const Tt=e=>{localStorage.setItem("language",e),e==="he"?document.body.dir="rtl":document.body.dir="ltr"},A=()=>{const e=localStorage.getItem("language");return e||(Tt(Y[0]),Y[0])};function lo(){const e=localStorage.getItem("language");e||Tt(Y[0]),e==="he"?document.body.dir="rtl":document.body.dir="ltr"}const co=()=>{const e=A(),t=Y.indexOf(e);return Y[(t+1)%Y.length]},Xt=()=>{const e=A(),t=$[e],o=t.buttons;for(const[S,z]of Object.entries(o)){const F=`${S}-button`,G=document.getElementById(F);G.textContent=z}const a=document.getElementById("difficulty-button"),i=a.dataset.difficulty;i&&(a.textContent=gt(i));const l=document.getElementById("subtitle");l.textContent=t.subtitle;const s=document.getElementById("settings-title");s.textContent=t.settings.title;const c=document.getElementById("select-layout-label");c.textContent=t.settings.layout;const u=t.settings.layoutOptions;for(const[S,z]of Object.entries(u)){const F=`${S}-option`,G=document.getElementById(F);G.textContent=z}const p=document.getElementById("apply-button");p.textContent=t.settings.apply;const d=document.getElementById("how-to-title");d.textContent=t.howTo.title;const E=document.getElementById("how-to-objective-title");E.textContent=t.howTo.objective.title;const k=document.getElementById("how-to-objective-text");k.innerHTML=t.howTo.objective.text.join("<br />");const L=document.getElementById("how-to-gameplay-title");L.textContent=t.howTo.gameplay.title;const O=t.howTo.gameplay.steps;for(let S=0;S<O.length;S++){const z=`how-to-gameplay-step-${S+1}`,F=document.getElementById(z);F.textContent=O[S]}const P=document.getElementById("how-to-controls-title");P.textContent=t.howTo.controls.title;const w=t.howTo.controls.buttons;for(const[S,z]of Object.entries(w)){const F=`how-to-controls-${S}`,G=document.getElementById(F),[at,lt]=z;G.innerHTML=`<b>${at}</b> ${lt}`}const q=document.getElementById("how-to-feedback-title");q.textContent=t.howTo.feedback.title;const Z=t.howTo.feedback.toasts;for(const[S,z]of Object.entries(Z)){const F=`how-to-feedback-${S}`,G=document.getElementById(F);G.textContent=z}const K=document.getElementById("how-to-utility-title");K.textContent=t.howTo.utility.title;const st=t.howTo.utility.buttons;for(const[S,z]of Object.entries(st)){const F=`how-to-utility-${S}`,G=document.getElementById(F);G.textContent=z}const it=document.getElementById("error-message");it.textContent=t.errorScreen.message;const rt=document.getElementById("error-message-refresh");rt.textContent=t.errorScreen.messageRefresh},uo=()=>{const e=document.getElementById("mistakes"),t=e.textContent;let o="",a=!1;const l=[...new Intl.Segmenter(void 0,{granularity:"grapheme"}).segment(t)];for(const{segment:s}of l)!a&&s===Gt?(o+=qe,a=!0):o+=s;e.textContent=o};function Ut(e){const t=document.getElementById("mistakes");t.textContent=Gt.repeat(e)}const Et=(e,t)=>{const o=document.getElementById("subtitle-groups"),a=[];for(let i=0;i<e.length;i++)t[i].tiles.length===0?a.push(`${e[i]}`):a.push(`<del>${e[i]}</del>`);o.innerHTML=`${a.join(", ")}`};function fo(e){let t=0;e.forEach(i=>{const l=i.innerText.length;l>t&&(t=l)});const a=parseFloat(getComputedStyle(e[0]).width)/t;e.forEach(i=>{i.style.fontSize=`${a}px`})}function ho(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto",t.style.width=e.clientWidth+"px",t.style.whiteSpace="normal",t.style.lineHeight=getComputedStyle(e).lineHeight,document.body.appendChild(t);let o=1,a=window.innerHeight<=768?16:24,i=o;for(;o<=a;){const l=Math.floor((o+a)/2);t.style.fontSize=`${l}px`,t.scrollHeight<=e.clientHeight?(i=l,o=l+1):a=l-1}return document.body.removeChild(t),i}const Vt=()=>{const e=document.querySelector(".loading-container");e.style.display="none",!Dt()&&!bt()&&so();const t=document.getElementById("settings-button"),o=document.getElementById("how-to-button");t.style.display="block",o.style.display="block"},mo=()=>{const e=document.querySelector(".loading-container");no(),e.style.display="flex";const t=document.getElementById("settings-button"),o=document.getElementById("how-to-button");t.style.display="none",o.style.display="none"};function po(e){document.getElementById("theme-toggle-button").addEventListener("click",()=>{document.body.classList.toggle(ft)}),ao(),document.getElementById("language-button").addEventListener("click",_e),lo(),Xt();const a=document.getElementById("error-button"),i=document.getElementById("settings-button"),l=document.getElementById("how-to-button");a.addEventListener("click",Ye),i.addEventListener("click",We),l.addEventListener("click",Ve),document.getElementById("blur-overlay").addEventListener("click",()=>{bt()?ot():wt(),nt()});const c=document.querySelectorAll(".game-controls .game-button");fo(c);const u=e.groups.sort((P,w)=>P-w);de(!ae(u),"Groups contain duplicates");const p=document.getElementById("board"),d=getComputedStyle(p),E=parseFloat(d.columnGap),k=parseFloat(d.rowGap),L={horizontal:E,vertical:k};Ut(e.mistakesAllowed);let O=X();return O||(O=jt(e.layout)),{groups:u,board:p,gaps:L}}(async()=>{const{groups:e,board:t,gaps:o}=po(dt),a=dt.defaultDifficulty,{gameState:i,positions:l,boardConfig:s}=await Pe(dt,a,e,t,o);et(l,i,s),De(i,s,l,e),Ue(l,i,s)})()});export default yo();
