<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />

    <!-- Styles -->
    <link rel="stylesheet" href="./src/styles/style.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./public/icon.png" sizes="16x16" />

    <title>Connections+</title>
  </head>

  <body>
    <header>
      <div class="utility-bar">
        <button
          id="theme-toggle-button"
          aria-label="Toggle light/dark modes"
          title="Toggle light/dark modes"
        ></button>

        <button
          id="settings-button"
          aria-label="Open settings"
          title="Open settings"
        >
          ⚙️
        </button>

        <button
          id="how-to-button"
          aria-label="How to play?"
          title="How to play?"
        >
          ❓
        </button>
      </div>
    </header>

    <main id="game-container">
      <div class="game-header">
        <h1 id="title">Connections+</h1>
        <p id="subtitle"></p>
      </div>

      <div id="board" class="game-board" aria-label="Game board"></div>

      <div class="game-controls">
        <button
          id="new-game-button"
          aria-label="Start a new game"
          title="Start a new game"
          class="game-button"
        >
          NEW 🎮
        </button>

        <button
          id="deselect-all-button"
          aria-label="Deselect all tiles"
          title="Deselect all tiles"
          class="game-button"
        >
          CLEAR 🧹
        </button>

        <button
          id="shuffle-button"
          aria-label="Shuffle the tiles"
          title="Shuffle the tiles"
          class="game-button"
        >
          SHUFFLE 🎲
        </button>

        <button
          id="solve-button"
          aria-label="solve the puzzle"
          title="Solve the puzzle"
          class="game-button"
        >
          SOLVE 🎯
        </button>

        <button
          id="hint-button"
          aria-label="get a hint"
          title="Hint"
          class="game-button"
        >
          HINT 💡
        </button>

        <button
          id="submit-button"
          aria-label="Submit your selection"
          title="Submit your selection"
          class="game-button"
        >
          SUBMIT ✔️
        </button>

        <button
          id="difficulty-button"
          aria-label="Change difficulty level"
          title="Change difficulty level"
          class="game-button"
        ></button>
      </div>

      <div class="game-mistakes">
        <p id="mistakes"></p>
      </div>
    </main>

    <div id="error-screen" class="screen-container">
      <p id="error-message" class="screen-message">
        An unexpected error occurred.
      </p>
      <p
        id="error-button"
        aria-label="Refresh"
        title="Refresh"
        class="screen-button"
      >
        🫣
      </p>
      <p id="error-message-refresh" class="screen-message-refresh">
        Click the emoji to refresh
      </p>
    </div>

    <div id="blur-overlay" class="blur-overlay"></div>

    <div id="settings-panel" class="popup">
      <h2>Settings ⚙️</h2>
      <div class="popup-layout">
        <label for="select-layout">Layout:</label>
        <select id="select-layout" aria-label="Select layout style">
          <option value="compact">Compact</option>
          <option value="spacious">Spacious</option>
        </select>
      </div>
      <button id="apply-button" class="game-button">Apply ✅</button>
    </div>

    <div id="how-to-popup" class="popup">
      <h2>How To Play? 🤔</h2>
      <div class="popup-layout">
        <table id="how-to-table">
          <tr>
            <td class="column-title">Objective</td>
            <td>
              Group the words by their hidden connections. Each word fits into
              one—and only one—group. <br />
              The catch? You don’t know how many words are in each group. 😉
            </td>
          </tr>

          <tr>
            <td class="column-title">Gameplay</td>
            <td>
              <ol>
                <li>Click on the words you think belong together.</li>
                <li>Hit <i>SUBMIT</i> to check your guess.</li>
                <li>Keep going until all groups are found.</li>
              </ol>
            </td>
          </tr>

          <tr>
            <td class="column-title">Controls</td>
            <td>
              <ul>
                <li><b>🎮 NEW:</b> Start over with a new puzzle.</li>
                <li><b>🧹 CLEAR:</b> Clear your selection.</li>
                <li><b>🎲 SHUFFLE:</b> Mix up the tiles.</li>
                <li><b>🎯 SOLVE:</b> Solve the puzzle.</li>
                <li>
                  <b>💡 HINT:</b>
                  Get a hint - selects half the tiles of the largest unsolved
                  group. Once shown, you cannot deselect those tiles!
                </li>
                <li><b>✔️ SUBMIT:</b> Submit your selection.</li>
                <li>
                  <b>🐤 DIFFICULTY:</b> Switch between Easy, Medium, and Hard
                  modes.
                </li>
              </ul>
            </td>
          </tr>

          <tr>
            <td class="column-title">Feedback System</td>
            <td>
              <ul>
                <li>
                  ✅ Correct selections: You'll get praised and the tile will
                  move to the solution area with their connection revealed.
                </li>
                <li>
                  ℹ️ Partially correct submissions (more than half right):
                  Reveal how many tiles are correct.
                </li>
                <li>
                  ❌ Mostly incorrect: You'll get a generic "nope" message.
                </li>
                <li>
                  🔄 Repeated submissions: The game will nudge you to try
                  something new.
                </li>
              </ul>
            </td>
          </tr>

          <tr>
            <td class="column-title">Utility Bar</td>
            <td>
              <ul>
                <li>
                  <b>🌞/🌜 Theme Toggle:</b> Switch between light and dark
                  themes.
                </li>
                <li><b>⚙️ Settings:</b> Open the settings panel.</li>
                <li><b>❓ How To Play:</b> Open this how-to popup.</li>
              </ul>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="./src/main.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/toastify-js"
    ></script>
  </body>
</html>
